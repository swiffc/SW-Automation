<UserControl x:Class="UnifiedUI.Views.BundlePanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="15">
        <StackPanel MaxWidth="800">
            
            <!-- Quick Start Section -->
            <Border Background="#E3F2FD" BorderBrush="#2196F3" BorderThickness="2" 
                    CornerRadius="8" Padding="15" Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock Text="🎛︝ Quick Start - Choose Your Method" FontSize="14" FontWeight="SemiBold" 
                               Foreground="#1976D2" Margin="0,0,0,10"/>
                    
                    <!-- Import Option Hint -->
                    <Border Background="#FFF9C4" BorderBrush="#FBC02D" BorderThickness="1" 
                            CornerRadius="4" Padding="8" Margin="0,0,0,10">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="💡 Tip: " FontWeight="Bold" Foreground="#F57F17"/>
                            <TextBlock Foreground="#666">
                                <Run Text="Click "/>
                                <Run Text="Import" FontWeight="Bold" Foreground="#1976D2"/>
                                <Run Text=" (toolbar) to load from Excel template (like S25140-Prego1.xlsm) "/>
                                <Run Text="OR" FontWeight="Bold"/>
                                <Run Text=" fill manually below"/>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Load Template:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <ComboBox Grid.Column="1" Margin="0,0,10,0">
                            <ComboBoxItem Content="Standard 2-Row Bundle" IsSelected="True"/>
                            <ComboBoxItem Content="3-Row High Capacity"/>
                            <ComboBoxItem Content="Custom Configuration"/>
                        </ComboBox>
                        <Button Grid.Column="2" Content="Load" Width="70" Margin="0,0,5,0" 
                                Background="#4CAF50" Foreground="White" BorderThickness="0" 
                                Padding="10,5" Cursor="Hand"/>
                        <Button Grid.Column="3" Content="Clear" Width="70" 
                                Background="#FF9800" Foreground="White" BorderThickness="0" 
                                Padding="10,5" Cursor="Hand"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Job Information -->
            <GroupBox Header="📄 Job Information" Margin="0,0,0,15" Padding="15">
                <GroupBox.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" FontSize="14" FontWeight="SemiBold" Foreground="#333"/>
                    </DataTemplate>
                </GroupBox.HeaderTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Job Number:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="1" 
                             Text="{Binding DataContext.GlobalJobNumber, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged}" 
                             Padding="5" Margin="0,5"/>
                    
                    <TextBlock Grid.Row="0" Grid.Column="3" Text="Serial No:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="4" Text="Auto-generated (Job-7)" IsEnabled="False" 
                             Background="#F5F5F5" Padding="5" Margin="0,5"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Part Prefix:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="1" Grid.Column="1" 
                             Text="{Binding DataContext.GlobalPartPrefix, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged}" 
                             Padding="5" Margin="0,5"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="3" Text="Revision:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="1" Grid.Column="4" 
                             Text="{Binding DataContext.GlobalRevision, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged}" 
                             Padding="5" Margin="0,5"/>
                </Grid>
            </GroupBox>

            <!-- Bundle Dimensions -->
            <GroupBox Header="📝 Bundle Dimensions" Margin="0,0,0,15" Padding="15">
                <GroupBox.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" FontSize="14" FontWeight="SemiBold" Foreground="#333"/>
                    </DataTemplate>
                </GroupBox.HeaderTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Bundle Width:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding BundleWidth, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                             Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    <TextBlock Grid.Row="0" Grid.Column="3" Text="✅" VerticalAlignment="Center" 
                               FontSize="20" HorizontalAlignment="Center"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Side Frame THK:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SideFrameThickness, UpdateSourceTrigger=PropertyChanged}" 
                             Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    <TextBlock Grid.Row="1" Grid.Column="3" Text="✅" VerticalAlignment="Center" 
                               FontSize="20" HorizontalAlignment="Center"/>
                    
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Side Frame Depth:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding SideFrameDepth, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                             Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="2" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    <TextBlock Grid.Row="2" Grid.Column="3" Text="✅" VerticalAlignment="Center" 
                               FontSize="20" HorizontalAlignment="Center"/>
                    
                    <CheckBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                              Content="Headers Outside Frame" Margin="0,10,0,0"/>
                </Grid>
            </GroupBox>

            <!-- Tube Configuration -->
            <GroupBox Header="🔧 Tube Configuration" Margin="0,0,0,15" Padding="15">
                <GroupBox.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" FontSize="14" FontWeight="SemiBold" Foreground="#333"/>
                    </DataTemplate>
                </GroupBox.HeaderTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="15"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Tube Length:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="1" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Tube Projection:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="1" Grid.Column="1" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Tube OD:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding CurrentConfiguration.TubeOD, UpdateSourceTrigger=PropertyChanged}" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="2" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Tube Wall THK:" VerticalAlignment="Center"/>
                    <ComboBox Grid.Row="3" Grid.Column="1" Margin="0,5">
                        <ComboBoxItem Content="0.035" IsSelected="True"/>
                        <ComboBoxItem Content="0.049"/>
                        <ComboBoxItem Content="0.065"/>
                    </ComboBox>
                    <TextBlock Grid.Row="3" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Fin OD:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="4" Grid.Column="1" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="4" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <!-- Tube Layout -->
                    <Border Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="4" 
                            Background="#FFF8DC" BorderBrush="#FFD700" BorderThickness="1" 
                            CornerRadius="4" Padding="10">
                        <TextBlock Text="💡 Tube Layout" FontWeight="SemiBold"/>
                    </Border>
                    
                    <TextBlock Grid.Row="7" Grid.Column="0" Text="Row 1 Left:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding CurrentConfiguration.TubeRow1Count, UpdateSourceTrigger=PropertyChanged}" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="7" Grid.Column="2" Text="tubes" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="8" Grid.Column="0" Text="Row 2 Left:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="8" Grid.Column="1" Text="{Binding CurrentConfiguration.TubeRow2Count, UpdateSourceTrigger=PropertyChanged}" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="8" Grid.Column="2" Text="tubes" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                    
                    <TextBlock Grid.Row="9" Grid.Column="0" Text="Horizontal Pitch:" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="9" Grid.Column="1" Padding="5" Margin="0,5"/>
                    <TextBlock Grid.Row="9" Grid.Column="2" Text="inches" VerticalAlignment="Center" 
                               Margin="10,0,0,0" Foreground="#666"/>
                </Grid>
            </GroupBox>

            <!-- Calculated Properties -->
            <GroupBox Header="📊 Calculated Properties (Auto)" Margin="0,0,0,15" Padding="15" 
                      Background="#F0FFF0" BorderBrush="#4CAF50">
                <GroupBox.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" FontSize="14" FontWeight="SemiBold" Foreground="#4CAF50"/>
                    </DataTemplate>
                </GroupBox.HeaderTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Total Tubes:" VerticalAlignment="Center" 
                               FontWeight="SemiBold"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" Text="94" VerticalAlignment="Center" 
                               FontSize="16" Foreground="#4CAF50" FontWeight="Bold"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Bundle Height:" VerticalAlignment="Center" 
                               FontWeight="SemiBold"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="36.250 inches (calculated)" 
                               VerticalAlignment="Center" FontSize="14" Foreground="#4CAF50"/>
                    
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Estimated Weight:" VerticalAlignment="Center" 
                               FontWeight="SemiBold"/>
                    <TextBlock Grid.Row="2" Grid.Column="1" Text="2,847 lbs" VerticalAlignment="Center" 
                               FontSize="14" Foreground="#4CAF50"/>
                </Grid>
            </GroupBox>

            <!-- Advanced Options (Collapsible) -->
            <Expander Header="⚙︝ Advanced Options" Margin="0,0,0,15" 
                      BorderBrush="#CCC" BorderThickness="1" Padding="15">
                <StackPanel>
                    <TextBlock Text="Vertical Pitches" FontWeight="SemiBold" Margin="0,5,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Pitch 1-2:" VerticalAlignment="Center"/>
                        <TextBox Grid.Row="0" Grid.Column="1" Text="1.500" Margin="0,5"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Pitch 2-3:" VerticalAlignment="Center"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="1.500" Margin="0,5"/>
                    </Grid>
                    
                    <Separator Margin="0,15"/>
                    
                    <CheckBox Content="Enable Tube Supports" Margin="0,5"/>
                    <CheckBox Content="Enable Fin Strip Back" Margin="0,5"/>
                    <CheckBox Content="Enable Camber" Margin="0,5"/>
                </StackPanel>
            </Expander>

        </StackPanel>
    </ScrollViewer>
</UserControl>
